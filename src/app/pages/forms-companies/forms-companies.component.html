<app-header [title]="headerTitle" [caption]="headerCaption"></app-header>

<p-toast></p-toast>
<div class="container">
    <div class="card">
        <form [formGroup]="companyForm" *ngIf="!errorMessage && companyForm else errorMessageContainer">
            <div class="form-group">
                <label for="companyName">Nome</label>
                <input type="text" class="form-control" id="companyName" name="companyName" formControlName="companyName" [ngClass]="{'invalid': companyForm.get('companyName')?.errors && companyForm.get('companyName')?.touched}">
            </div>

            <div class="form-group">
                <label for="collaboratorsCount">Quantidade de Colaboradores</label>
                <input type="number" min="0" class="form-control" id="collaboratorsCount" name="collaboratorsCount" formControlName="collaboratorsCount" [ngClass]="{'invalid': companyForm.get('collaboratorsCount')?.errors && companyForm.get('collaboratorsCount')?.touched}">
            </div>
            
            <div class="form-group">
                <label for="isActive">Status</label>
                <select name="isActive" id="isActive" formControlName="isActive" [ngClass]="{'invalid': companyForm.get('isActive')?.errors && companyForm.get('isActive')?.touched}">
                    <option [ngValue]="true">Ativo</option>
                    <option [ngValue]="false">Inativo</option>
                </select>
            </div>

            <div class="errors" *ngIf="!isViewMode">
                <p class="message" *ngIf="!companyForm.valid && companyForm.touched">
                    Preencha os campos obrigatórios para salvar! 
                </p>
            </div>
            <div class="form-button" *ngIf="!isViewMode">
                <button type="submit" class="btn btn-primary" (click)="save()" [disabled]="!companyForm.valid">Salvar</button>
            </div>
        </form>

        <ng-template #errorMessageContainer>
        <div class="alert alert-danger" role="alert">
            <strong>Empresa não encontrada!</strong>
        </div>
        </ng-template>
    </div>
</div>
